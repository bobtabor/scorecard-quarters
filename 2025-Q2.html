<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Macro Scorecard - Compare - Q2 2025</title>
    <style>
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1080px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .nav {
            margin-bottom: 20px;
        }
        .nav a {
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
        }
        .nav a:hover {
            text-decoration: underline;
        }
        
        .charts-section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        .chart-container {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            background: #1a1a1a;
        }
        .chart-title {
            color: #ffffff;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        .chart-root {
            position: relative;
            width: 100%;
            height: 640px;
        }
        
        .footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #7f8c8d;
            font-size: 12px;
            text-align: center;
        }
        
    </style>
</head>
<body>
    <div class="container">
        <div class="nav">
            <a href="2025-Q1.html">← Q1 2025</a> | <a href="index.html">← Back to Index</a> | <a href="2025-Q3.html">Q3 2025 →</a>
        </div>
        <h1>Macro Scorecard - Compare - Q2 2025</h1>

        <div class="charts-container">
            
                <div class="charts-section">
                    <div class="chart-container">
                        <div class="chart-title">SPY</div>
                        <div class="chart-root" id="chart_SPY"></div>
                    </div>
                </div>
                
                <div class="charts-section">
                    <div class="chart-container">
                        <div class="chart-title">QQQ</div>
                        <div class="chart-root" id="chart_QQQ"></div>
                    </div>
                </div>
                
        </div>

        <div class="footer">
            Generated on 2026-02-13 20:00 UTC
        </div>
    </div>

    <!-- Chart class definitions (must come before instantiation) -->
    <script>
        
        // Chart color scheme (matching generate-site)
        const COLORS = {
            bg: '#1a1a1a',
            grid: '#333333',
            text: '#ffffff',
            upCandle: '#26A69A',
            downCandle: '#EF5350',
            wick: '#838ca5',
            ema8: '#B0B0B0',
            ema21: '#D8BFD8',
            sma50: '#FFEB3B',
            bbUpper: '#4CAF50',
            bbMiddle: '#2196F3',
            bbLower: '#F44336',
            volume: '#434651',
            volumeDown: '#434651',
            v1_scorecard: '#2196F3',
            v2_scorecard: '#9C27B0'
        };
        class CandlestickChart {
            constructor(containerId, data, scorecardData, autoRender = true) {
                this.container = document.getElementById(containerId);
                this.data = data;
                this.scorecardData = scorecardData;
                this.width = this.container.clientWidth;
                this.height = this.container.clientHeight || 640;
                this.margin = { top: 10, right: 10, bottom: 30, left: 10 };
                this.chartWidth = this.width - this.margin.left - this.margin.right;
                this.chartHeight = this.height - this.margin.top - this.margin.bottom;
                this.setupScales();
                if (autoRender) {
                    this.render();
                }
            }
            setupScales() {
                if (!this.data || !this.data.data || this.data.data.length === 0) {
                    return;
                }
                const prices = this.data.data;
                const priceRange = this.getPriceRange(prices);
                const volumeRange = this.getVolumeRange(prices);
                this.xScale = (i) => (i / (prices.length - 1)) * this.chartWidth;
                this.yScale = (price) => this.chartHeight * 0.7 * (1 - (price - priceRange.min) / (priceRange.max - priceRange.min));
                this.volumeScale = (volume) => (this.chartHeight * 0.25) * (volume / volumeRange.max);
            }
            getPriceRange(prices) {
                const allPrices = [];
                prices.forEach(p => {
                    // Skip null data points
                    if (p.high !== null && p.low !== null && p.open !== null && p.close !== null) {
                        allPrices.push(p.high, p.low, p.open, p.close);
                        if (p.ema_8) allPrices.push(p.ema_8);
                        if (p.ema_21) allPrices.push(p.ema_21);
                        if (p.sma_50) allPrices.push(p.sma_50);
                        if (p.bb_upper) allPrices.push(p.bb_upper);
                        if (p.bb_lower) allPrices.push(p.bb_lower);
                    }
                });
                if (allPrices.length === 0) {
                    return { min: 0, max: 100 };  // Default range for empty charts
                }
                return { min: Math.min(...allPrices), max: Math.max(...allPrices) };
            }

            getVolumeRange(prices) {
                const volumes = prices.filter(p => p.volume !== null).map(p => p.volume);
                if (volumes.length === 0) {
                    return { min: 0, max: 1000000 };  // Default range for empty charts
                }
                return { min: Math.min(...volumes), max: Math.max(...volumes) };
            }

            render() {
                if (!this.data || !this.data.data || this.data.data.length === 0) {
                    this.container.innerHTML = '<div style="color: white; text-align: center; padding: 50px;">No chart data available</div>';
                    return;
                }

                    // Create SVG with fixed pixel width for proper alignment
                    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                    svg.setAttribute('width', `${this.width}`);
                    svg.setAttribute('height', `${this.height}`);
                    svg.style.backgroundColor = COLORS.bg;
                    svg.style.display = 'block';
                    svg.style.margin = '0 auto';

                // Create tooltip element
                this.tooltip = document.createElement('div');
                this.tooltip.style.cssText = `
                    position: fixed;
                    background: rgba(0,0,0,0.92);
                    color: #fff;
                    padding: 7px 12px;
                    border-radius: 5px;
                    font-size: 13px;
                    pointer-events: none;
                    opacity: 0;
                    z-index: 1000;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                    transition: opacity 0.2s;
                    white-space: pre;
                `;

                // Create main chart group
                const chartGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                chartGroup.setAttribute('transform', `translate(${this.margin.left}, ${this.margin.top})`);

                // Draw grid
                this.drawGrid(chartGroup);

                // Draw Y-axis labels for scorecard scale
                this.drawYAxisLabels(chartGroup);

                // Draw Bollinger Bands
                this.drawBollingerBands(chartGroup);

                // Draw moving averages
                this.drawMovingAverages(chartGroup);

                // Draw candlesticks
                this.drawCandlesticks(chartGroup);

                // Draw volume
                this.drawVolume(chartGroup);

                // Draw scorecard overlays
                this.drawScorecardOverlays(chartGroup);

                // Draw legend
                this.drawLegend(chartGroup);

                svg.appendChild(chartGroup);
                this.container.innerHTML = '';
                this.container.appendChild(svg);
                this.container.appendChild(this.tooltip);
            }

            drawYAxisLabels(group) {
                // Draw Y-axis labels for scorecard scale (0-9)
                // Position them on the right side of the chart
                const rightX = this.chartWidth + 5;  // 5px padding from right edge

                for (let score = 0; score <= 9; score++) {
                    const scoreRatio = score / 9;  // Scale to 0-1 range
                    const y = this.chartHeight * 0.7 * (1 - scoreRatio);  // Invert for top-to-bottom

                    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    text.setAttribute('x', rightX);
                    text.setAttribute('y', y + 4);  // Adjust for better vertical centering
                    text.setAttribute('fill', COLORS.text);
                    text.setAttribute('font-size', '10');
                    text.setAttribute('font-family', 'monospace');
                    text.textContent = score.toString();
                    group.appendChild(text);
                }
            }

            drawGrid(group) {
                // Horizontal grid lines
                for (let i = 0; i <= 10; i++) {
                    const y = (i / 10) * this.chartHeight * 0.7;
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', 0);
                    line.setAttribute('x2', this.chartWidth);
                    line.setAttribute('y1', y);
                    line.setAttribute('y2', y);
                    line.setAttribute('stroke', COLORS.grid);
                    line.setAttribute('stroke-width', 0.5);
                    group.appendChild(line);
                }

                // Vertical grid lines
                const dataLength = this.data.data.length;
                for (let i = 0; i < dataLength; i += Math.floor(dataLength / 6)) {
                    const x = this.xScale(i);
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', x);
                    line.setAttribute('x2', x);
                    line.setAttribute('y1', 0);
                    line.setAttribute('y2', this.chartHeight);
                    line.setAttribute('stroke', COLORS.grid);
                    line.setAttribute('stroke-width', 0.5);
                    group.appendChild(line);
                }
            }

            drawBollingerBands(group) {
                const prices = this.data.data;
                if (!prices || prices.length === 0) return;

                // Check if any point has BB data
                const hasBBData = prices.some(p => p.bb_upper !== undefined && p.bb_upper !== null);
                if (!hasBBData) return;

                const pathData = {
                    upper: [],
                    middle: [],
                    lower: []
                };

                let firstPoint = true;
                prices.forEach((p, i) => {
                    if (p.bb_upper !== undefined && p.bb_upper !== null && p.open !== null) {
                        const x = this.xScale(i);
                        const cmd = firstPoint ? 'M' : 'L';
                        pathData.upper.push(`${cmd} ${x},${this.yScale(p.bb_upper)}`);
                        pathData.middle.push(`${cmd} ${x},${this.yScale(p.bb_middle)}`);
                        pathData.lower.push(`${cmd} ${x},${this.yScale(p.bb_lower)}`);
                        firstPoint = false;
                    }
                });

                if (pathData.upper.length === 0) return;

                ['upper', 'middle', 'lower'].forEach(band => {
                    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                    path.setAttribute('d', pathData[band].join(' '));
                    path.setAttribute('fill', 'none');
                    path.setAttribute('stroke', COLORS[`bb${band.charAt(0).toUpperCase() + band.slice(1)}`]);
                    path.setAttribute('stroke-width', '1');
                    path.setAttribute('opacity', '0.6');
                    group.appendChild(path);
                });
            }

            drawMovingAverages(group) {
                const prices = this.data.data;
                if (!prices || prices.length === 0) return;

                const mas = [
                    { key: 'ema_8', color: COLORS.ema8, width: 1.5 },
                    { key: 'ema_21', color: COLORS.ema21, width: 1.5 },
                    { key: 'sma_50', color: COLORS.sma50, width: 2 }
                ];

                mas.forEach(ma => {
                    const pathData = [];
                    prices.forEach((p, i) => {
                        if (p[ma.key] !== undefined && p[ma.key] !== null && p.open !== null) {
                            const x = this.xScale(i);
                            const y = this.yScale(p[ma.key]);
                            pathData.push(`${pathData.length === 0 ? 'M' : 'L'} ${x},${y}`);
                        }
                    });

                    if (pathData.length > 0) {
                        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                        path.setAttribute('d', pathData.join(' '));
                        path.setAttribute('fill', 'none');
                        path.setAttribute('stroke', ma.color);
                        path.setAttribute('stroke-width', ma.width);
                        group.appendChild(path);
                    }
                });
            }

            drawCandlesticks(group) {
                const prices = this.data.data;
                const candleWidth = Math.max(1, (this.chartWidth / prices.length) * 0.7);

                prices.forEach((p, i) => {
                    const x = this.xScale(i);

                    // Skip null data points
                    if (p.open === null || p.high === null || p.low === null || p.close === null) {
                        return;
                    }

                    const isUp = p.close >= p.open;
                    const color = isUp ? COLORS.upCandle : COLORS.downCandle;

                    // Wick
                    const wick = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    wick.setAttribute('x1', x);
                    wick.setAttribute('y1', this.yScale(p.high));
                    wick.setAttribute('x2', x);
                    wick.setAttribute('y2', this.yScale(p.low));
                    wick.setAttribute('stroke', color);
                    wick.setAttribute('stroke-width', '1');
                    group.appendChild(wick);

                    // Body
                    const bodyHeight = Math.abs(this.yScale(p.open) - this.yScale(p.close));
                    const body = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    body.setAttribute('x', x - candleWidth / 2);
                    body.setAttribute('y', Math.min(this.yScale(p.open), this.yScale(p.close)));
                    body.setAttribute('width', candleWidth);
                    body.setAttribute('height', Math.max(1, bodyHeight));
                    body.setAttribute('fill', color);
                    group.appendChild(body);

                    // Add interactivity
                    const hitbox = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    hitbox.setAttribute('x', x - candleWidth);
                    hitbox.setAttribute('y', '0');
                    hitbox.setAttribute('width', candleWidth * 2);
                    hitbox.setAttribute('height', this.chartHeight * 0.7);
                    hitbox.setAttribute('fill', 'transparent');
                    hitbox.style.cursor = 'crosshair';

                    hitbox.addEventListener('mouseenter', (e) => {
                        // Build tooltip text with OHLCV data
                        let tooltipText = `Date: ${p.date}\nO: ${p.open.toFixed(2)} H: ${p.high.toFixed(2)}\nL: ${p.low.toFixed(2)} C: ${p.close.toFixed(2)}\nVol: ${(p.volume / 1000000).toFixed(2)}M`;

                        // Add V1 and V2 scores if available
                        if (this.scorecardData) {
                            if (this.scorecardData.v1 && this.scorecardData.v1[p.date] !== undefined) {
                                tooltipText += `\nV1: ${this.scorecardData.v1[p.date]}/6`;
                            }
                            if (this.scorecardData.v2 && this.scorecardData.v2[p.date] !== undefined) {
                                tooltipText += `\nV2: ${this.scorecardData.v2[p.date]}/9`;
                            }
                        }

                        this.tooltip.textContent = tooltipText;
                        this.tooltip.style.opacity = '1';
                    });

                    hitbox.addEventListener('mousemove', (e) => {
                        // Use clientX/clientY for fixed positioning relative to viewport
                        this.tooltip.style.left = (e.clientX + 10) + 'px';
                        this.tooltip.style.top = (e.clientY - 30) + 'px';
                    });

                    hitbox.addEventListener('mouseleave', () => {
                        this.tooltip.style.opacity = '0';
                    });

                    group.appendChild(hitbox);
                });
            }

            drawVolume(group) {
                const volumeBase = this.chartHeight * 0.75;
                this.data.data.forEach((candle, i) => {
                    // Skip null data points
                    if (candle.volume === null || candle.volume === undefined) {
                        return;
                    }

                    const x = this.xScale(i);
                    const barWidth = Math.max(1, this.chartWidth / this.data.data.length * 0.8);
                    const barHeight = this.volumeScale(candle.volume);

                    const bar = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                    bar.setAttribute('x', x - barWidth/2);
                    bar.setAttribute('y', volumeBase);
                    bar.setAttribute('width', barWidth);
                    bar.setAttribute('height', barHeight);
                    bar.setAttribute('fill', COLORS.volume);
                    bar.setAttribute('opacity', 0.6);
                    group.appendChild(bar);
                });
            }

            drawScorecardOverlays(group) {
                if (!this.scorecardData || !this.scorecardData.v1 || !this.scorecardData.v2) return;

                const drawScorecard = (scores, color, yOffset) => {
                    const pathData = [];
                    const prices = this.data.data;

                    prices.forEach((p, i) => {
                        // Only draw scorecard for dates with actual price data
                        if (p.open === null || p.high === null || p.low === null || p.close === null) {
                            return;
                        }

                        const score = scores[p.date];
                        if (score !== undefined) {
                            const x = this.xScale(i);
                            // Scale ALL scores to 0-9 range (common Y-axis scale)
                            const scoreRatio = score / 9;
                            const y = this.chartHeight * 0.7 * (1 - scoreRatio) + yOffset;
                            pathData.push(`${pathData.length === 0 ? 'M' : 'L'} ${x},${y}`);
                        }
                    });

                    if (pathData.length > 0) {
                        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                        path.setAttribute('d', pathData.join(' '));
                        path.setAttribute('fill', 'none');
                        path.setAttribute('stroke', color);
                        path.setAttribute('stroke-width', '2');
                        path.setAttribute('opacity', '0.7');
                        group.appendChild(path);
                    }
                };

                // Draw V1 scorecard (0-6 scale, plotted on 0-9 Y-axis)
                drawScorecard(this.scorecardData.v1, COLORS.v1_scorecard, 0);

                // Draw V2 scorecard (0-9 scale, plotted on 0-9 Y-axis)
                drawScorecard(this.scorecardData.v2, COLORS.v2_scorecard, 0);
            }

            drawLegend(group) {
                // Build legend items dynamically based on what's actually in the data
                const legendItems = [
                    { label: 'Candlesticks: Green=Up, Red=Down', color: COLORS.upCandle }
                ];

                // Check if technical indicators are present in the data
                const prices = this.data.data;
                if (prices && prices.length > 0) {
                    const samplePoint = prices[0];

                    // Only add indicators that exist in the data
                    if (samplePoint.ema_8 !== undefined) {
                        legendItems.push({ label: '8 EMA', color: COLORS.ema8 });
                    }
                    if (samplePoint.ema_21 !== undefined) {
                        legendItems.push({ label: '21 EMA', color: COLORS.ema21 });
                    }
                    if (samplePoint.sma_50 !== undefined) {
                        legendItems.push({ label: '50 SMA', color: COLORS.sma50 });
                    }
                    if (samplePoint.bb_upper !== undefined) {
                        legendItems.push({ label: 'BB Upper', color: COLORS.bbUpper });
                        legendItems.push({ label: 'BB Middle', color: COLORS.bbMiddle });
                        legendItems.push({ label: 'BB Lower', color: COLORS.bbLower });
                    }
                }

                // Always add scorecard overlays if present
                if (this.scorecardData && this.scorecardData.v1) {
                    legendItems.push({ label: 'V1 Scorecard', color: COLORS.v1_scorecard });
                }
                if (this.scorecardData && this.scorecardData.v2) {
                    legendItems.push({ label: 'V2 Scorecard', color: COLORS.v2_scorecard });
                }

                const legendX = 10;
                const legendY = 10;
                const itemHeight = 14;

                // Create legend background
                const legendBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                legendBg.setAttribute('x', legendX - 5);
                legendBg.setAttribute('y', legendY - 5);
                legendBg.setAttribute('width', 200);
                legendBg.setAttribute('height', legendItems.length * itemHeight + 10);
                legendBg.setAttribute('fill', COLORS.bg);
                legendBg.setAttribute('stroke', COLORS.grid);
                legendBg.setAttribute('stroke-width', 1);
                legendBg.setAttribute('opacity', 0.9);
                group.appendChild(legendBg);

                // Add legend items
                legendItems.forEach((item, index) => {
                    const y = legendY + (index * itemHeight);

                    // Color line
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', legendX);
                    line.setAttribute('x2', legendX + 15);
                    line.setAttribute('y1', y + 5);
                    line.setAttribute('y2', y + 5);
                    line.setAttribute('stroke', item.color);
                    line.setAttribute('stroke-width', 2);
                    group.appendChild(line);

                    // Label text
                    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    text.setAttribute('x', legendX + 20);
                    text.setAttribute('y', y + 8);
                    text.setAttribute('font-size', '11');
                    text.setAttribute('fill', COLORS.text);
                    text.textContent = item.label;
                    group.appendChild(text);
                });
            }
        }
        

        // Extended chart class for compare pages with stochastic indicators
        class CompareChart extends CandlestickChart {
            constructor(containerId, data, scorecardData, stochasticData) {
                super(containerId, data, scorecardData, false);  // Don't auto-render
                this.stochasticData = stochasticData;
                this.render();  // Render after setting stochastic data
            }

            render() {
                // Call parent render
                super.render();

                // Add stochastic markers if present
                if (this.stochasticData && (this.stochasticData.stoch_10_4.length > 0 || this.stochasticData.stoch_10_1.length > 0)) {
                    const svg = this.container.querySelector('svg');
                    const chartGroup = svg.querySelector('g');

                    // Get price range for positioning markers
                    const prices = this.data.data;
                    const priceRange = this.getPriceRange(prices);

                    // Position dots at bottom of chart
                    const dotBaseY = this.chartHeight * 0.7 - 10;

                    // Create date to index mapping
                    const dateToIndex = {};
                    prices.forEach((p, i) => {
                        dateToIndex[p.date] = i;
                    });

                    // Draw stochastic [10,4] markers (bright pink)
                    this.stochasticData.stoch_10_4.forEach(dateStr => {
                        const idx = dateToIndex[dateStr];
                        if (idx !== undefined) {
                            // Only draw if we have actual price data for this date
                            const priceData = prices[idx];
                            if (priceData && priceData.open !== null && priceData.close !== null) {
                                const x = this.xScale(idx);
                                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                                circle.setAttribute('cx', x);
                                circle.setAttribute('cy', dotBaseY);
                                circle.setAttribute('r', '4');
                                circle.setAttribute('fill', '#FF1493');
                                circle.setAttribute('opacity', '0.8');
                                chartGroup.appendChild(circle);
                            }
                        }
                    });

                    // Draw stochastic [10,1] markers (pale pink)
                    this.stochasticData.stoch_10_1.forEach(dateStr => {
                        const idx = dateToIndex[dateStr];
                        if (idx !== undefined) {
                            // Only draw if we have actual price data for this date
                            const priceData = prices[idx];
                            if (priceData && priceData.open !== null && priceData.close !== null) {
                                const x = this.xScale(idx);
                                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                                circle.setAttribute('cx', x);
                                circle.setAttribute('cy', dotBaseY + 10);
                                circle.setAttribute('r', '4');
                                circle.setAttribute('fill', '#FFB6C1');
                                circle.setAttribute('opacity', '0.8');
                                chartGroup.appendChild(circle);
                            }
                        }
                    });
                }
            }

            drawLegend(group) {
                // Build legend items dynamically based on what's actually in the data
                const legendItems = [
                    { label: 'Candlesticks: Green=Up, Red=Down', color: COLORS.upCandle }
                ];

                // Check if technical indicators are present in the data
                const prices = this.data.data;
                if (prices && prices.length > 0) {
                    const samplePoint = prices[0];

                    // Only add indicators that exist in the data
                    if (samplePoint.ema_8 !== undefined) {
                        legendItems.push({ label: '8 EMA', color: COLORS.ema8 });
                    }
                    if (samplePoint.ema_21 !== undefined) {
                        legendItems.push({ label: '21 EMA', color: COLORS.ema21 });
                    }
                    if (samplePoint.sma_50 !== undefined) {
                        legendItems.push({ label: '50 SMA', color: COLORS.sma50 });
                    }
                    if (samplePoint.bb_upper !== undefined) {
                        legendItems.push({ label: 'BB Upper', color: COLORS.bbUpper });
                        legendItems.push({ label: 'BB Middle', color: COLORS.bbMiddle });
                        legendItems.push({ label: 'BB Lower', color: COLORS.bbLower });
                    }
                }

                // Add scorecard overlays if present
                if (this.scorecardData && this.scorecardData.v1) {
                    legendItems.push({ label: 'V1 Scorecard', color: COLORS.v1_scorecard });
                }
                if (this.scorecardData && this.scorecardData.v2) {
                    legendItems.push({ label: 'V2 Scorecard', color: COLORS.v2_scorecard });
                }

                // Add stochastic indicators if present
                if (this.stochasticData) {
                    if (this.stochasticData.stoch_10_4.length > 0) {
                        legendItems.push({ label: 'QQQ Stoch [10,4] < 20', color: '#FF1493' });
                    }
                    if (this.stochasticData.stoch_10_1.length > 0) {
                        legendItems.push({ label: 'QQQ Stoch [10,1] ≤ 20', color: '#FFB6C1' });
                    }
                }

                const legendX = 10;
                const legendY = 10;
                const itemHeight = 14;

                // Create legend background
                const legendBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                legendBg.setAttribute('x', legendX - 5);
                legendBg.setAttribute('y', legendY - 5);
                legendBg.setAttribute('width', 200);
                legendBg.setAttribute('height', legendItems.length * itemHeight + 10);
                legendBg.setAttribute('fill', COLORS.bg);
                legendBg.setAttribute('stroke', COLORS.grid);
                legendBg.setAttribute('stroke-width', 1);
                legendBg.setAttribute('opacity', 0.9);
                group.appendChild(legendBg);

                // Add legend items
                legendItems.forEach((item, index) => {
                    const y = legendY + (index * itemHeight);

                    // Color line or circle for stochastic
                    if (item.label.includes('Stoch')) {
                        // Draw circle for stochastic indicators
                        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                        circle.setAttribute('cx', legendX + 7);
                        circle.setAttribute('cy', y + 5);
                        circle.setAttribute('r', 4);
                        circle.setAttribute('fill', item.color);
                        circle.setAttribute('opacity', 0.8);
                        group.appendChild(circle);
                    } else {
                        // Draw line for other indicators
                        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                        line.setAttribute('x1', legendX);
                        line.setAttribute('x2', legendX + 15);
                        line.setAttribute('y1', y + 5);
                        line.setAttribute('y2', y + 5);
                        line.setAttribute('stroke', item.color);
                        line.setAttribute('stroke-width', 2);
                        group.appendChild(line);
                    }

                    // Label text
                    const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    text.setAttribute('x', legendX + 20);
                    text.setAttribute('y', y + 8);
                    text.setAttribute('font-size', '11');
                    text.setAttribute('fill', COLORS.text);
                    text.textContent = item.label;
                    group.appendChild(text);
                });
            }
        }
    </script>

    <!-- Chart instantiation scripts -->
    
                <script>
                (function() {
                    const chartData = [{"date": "2025-04-01", "open": 557.45, "high": 562.94, "low": 553.68, "close": 560.97, "volume": 54609641}, {"date": "2025-04-02", "open": 555.05, "high": 567.42, "low": 554.81, "close": 564.52, "volume": 76014544}, {"date": "2025-04-03", "open": 545.11, "high": 547.97, "low": 536.7, "close": 536.7, "volume": 125985998}, {"date": "2025-04-04", "open": 523.67, "high": 525.87, "low": 505.06, "close": 505.28, "volume": 217965131}, {"date": "2025-04-07", "open": 489.19, "high": 523.17, "low": 481.8, "close": 504.38, "volume": 256611355}, {"date": "2025-04-08", "open": 521.86, "high": 524.98, "low": 489.16, "close": 496.48, "volume": 165816581}, {"date": "2025-04-09", "open": 493.44, "high": 548.62, "low": 493.05, "close": 548.62, "volume": 241867317}, {"date": "2025-04-10", "open": 532.17, "high": 533.5, "low": 509.32, "close": 524.58, "volume": 162331225}, {"date": "2025-04-11", "open": 523.01, "high": 536.43, "low": 520.07, "close": 533.94, "volume": 97866334}, {"date": "2025-04-14", "open": 544.05, "high": 544.28, "low": 533.86, "close": 539.12, "volume": 68033993}, {"date": "2025-04-15", "open": 539.67, "high": 543.23, "low": 536.81, "close": 537.61, "volume": 56892874}, {"date": "2025-04-16", "open": 531.68, "high": 537.89, "low": 520.29, "close": 525.66, "volume": 83484814}, {"date": "2025-04-17", "open": 527.64, "high": 531.16, "low": 523.91, "close": 526.41, "volume": 79868083}, {"date": "2025-04-21", "open": 521.16, "high": 521.7, "low": 508.46, "close": 513.88, "volume": 69368129}, {"date": "2025-04-22", "open": 520.14, "high": 529.3, "low": 519.19, "close": 527.25, "volume": 75948117}, {"date": "2025-04-23", "open": 540.43, "high": 545.43, "low": 533.88, "close": 535.42, "volume": 90590658}, {"date": "2025-04-24", "open": 536.72, "high": 547.43, "low": 535.45, "close": 546.69, "volume": 64150418}, {"date": "2025-04-25", "open": 546.65, "high": 551.05, "low": 543.69, "close": 550.64, "volume": 61119590}, {"date": "2025-04-28", "open": 551.39, "high": 553.55, "low": 545.02, "close": 550.85, "volume": 47613755}, {"date": "2025-04-29", "open": 548.91, "high": 555.45, "low": 548.55, "close": 554.32, "volume": 47775121}, {"date": "2025-04-30", "open": 547.57, "high": 556.52, "low": 541.52, "close": 554.54, "volume": 93101463}, {"date": "2025-05-01", "open": 560.37, "high": 564.07, "low": 557.86, "close": 558.47, "volume": 63186146}, {"date": "2025-05-02", "open": 564.73, "high": 568.38, "low": 562.38, "close": 566.76, "volume": 60717270}, {"date": "2025-05-05", "open": 562.57, "high": 566.65, "low": 561.7, "close": 563.51, "volume": 38659222}, {"date": "2025-05-06", "open": 557.93, "high": 563.35, "low": 556.96, "close": 558.8, "volume": 48264708}, {"date": "2025-05-07", "open": 560.15, "high": 563.82, "low": 556.04, "close": 561.15, "volume": 55733229}, {"date": "2025-05-08", "open": 565.24, "high": 570.31, "low": 561.7, "close": 565.06, "volume": 65130787}, {"date": "2025-05-09", "open": 566.48, "high": 567.5, "low": 562.76, "close": 564.34, "volume": 37603427}, {"date": "2025-05-12", "open": 581.47, "high": 583.0, "low": 577.04, "close": 582.99, "volume": 78993570}, {"date": "2025-05-13", "open": 583.41, "high": 589.08, "low": 582.84, "close": 586.84, "volume": 67947225}, {"date": "2025-05-14", "open": 587.81, "high": 588.98, "low": 585.53, "close": 587.59, "volume": 66283531}, {"date": "2025-05-15", "open": 585.56, "high": 590.97, "low": 585.1, "close": 590.46, "volume": 71268145}, {"date": "2025-05-16", "open": 591.25, "high": 594.5, "low": 589.28, "close": 594.2, "volume": 76052101}, {"date": "2025-05-19", "open": 588.1, "high": 595.54, "low": 588.1, "close": 594.85, "volume": 68168509}, {"date": "2025-05-20", "open": 593.09, "high": 594.05, "low": 589.6, "close": 592.85, "volume": 60614492}, {"date": "2025-05-21", "open": 588.44, "high": 592.58, "low": 581.82, "close": 582.86, "volume": 95197657}, {"date": "2025-05-22", "open": 582.66, "high": 586.62, "low": 581.4, "close": 583.09, "volume": 70860417}, {"date": "2025-05-23", "open": 575.98, "high": 581.81, "low": 575.6, "close": 579.11, "volume": 76029046}, {"date": "2025-05-27", "open": 586.07, "high": 591.31, "low": 578.43, "close": 591.15, "volume": 72588475}, {"date": "2025-05-28", "open": 591.56, "high": 592.77, "low": 586.99, "close": 587.73, "volume": 68445512}, {"date": "2025-05-29", "open": 593.06, "high": 593.2, "low": 586.07, "close": 590.05, "volume": 70073758}, {"date": "2025-05-30", "open": 588.93, "high": 591.13, "low": 583.24, "close": 589.39, "volume": 90601242}, {"date": "2025-06-02", "open": 587.76, "high": 592.79, "low": 585.06, "close": 592.71, "volume": 61630502}, {"date": "2025-06-03", "open": 592.34, "high": 597.08, "low": 591.85, "close": 596.09, "volume": 63606204}, {"date": "2025-06-04", "open": 596.96, "high": 597.95, "low": 595.49, "close": 595.93, "volume": 57314199}, {"date": "2025-06-05", "open": 597.63, "high": 599.0, "low": 591.05, "close": 593.05, "volume": 92436397}, {"date": "2025-06-06", "open": 598.66, "high": 600.83, "low": 596.86, "close": 599.14, "volume": 66588743}, {"date": "2025-06-09", "open": 599.72, "high": 601.25, "low": 598.49, "close": 599.68, "volume": 53016418}, {"date": "2025-06-10", "open": 600.22, "high": 603.47, "low": 599.09, "close": 603.08, "volume": 66246973}, {"date": "2025-06-11", "open": 604.19, "high": 605.06, "low": 599.27, "close": 601.36, "volume": 73658225}, {"date": "2025-06-12", "open": 600.01, "high": 603.75, "low": 599.52, "close": 603.75, "volume": 64129003}, {"date": "2025-06-13", "open": 598.5, "high": 601.85, "low": 595.48, "close": 597.0, "volume": 89505996}, {"date": "2025-06-16", "open": 600.4, "high": 604.45, "low": 600.22, "close": 602.68, "volume": 79984125}, {"date": "2025-06-17", "open": 600.21, "high": 601.75, "low": 596.76, "close": 597.53, "volume": 82209365}, {"date": "2025-06-18", "open": 598.44, "high": 601.22, "low": 596.47, "close": 597.44, "volume": 76605029}, {"date": "2025-06-20", "open": 598.38, "high": 599.46, "low": 592.86, "close": 594.28, "volume": 94051374}, {"date": "2025-06-23", "open": 595.04, "high": 600.54, "low": 591.89, "close": 600.15, "volume": 87426039}, {"date": "2025-06-24", "open": 604.33, "high": 607.85, "low": 603.41, "close": 606.78, "volume": 67735293}, {"date": "2025-06-25", "open": 607.91, "high": 608.61, "low": 605.54, "close": 607.12, "volume": 62114767}, {"date": "2025-06-26", "open": 608.99, "high": 612.31, "low": 608.37, "close": 611.87, "volume": 78548361}, {"date": "2025-06-27", "open": 612.88, "high": 616.39, "low": 610.83, "close": 614.91, "volume": 86258398}, {"date": "2025-06-30", "open": 617.38, "high": 619.22, "low": 615.04, "close": 617.85, "volume": 92502541}];
                    const scorecardData = {"v1": {"2025-04-01": 0, "2025-04-02": 0, "2025-04-03": 1, "2025-04-04": 0, "2025-04-07": 0, "2025-04-08": 0, "2025-04-09": 0, "2025-04-10": 0, "2025-04-11": 0, "2025-04-14": 0, "2025-04-15": 0, "2025-04-16": 0, "2025-04-17": 0, "2025-04-21": 0, "2025-04-22": 0, "2025-04-23": 0, "2025-04-24": 0, "2025-04-25": 2, "2025-04-28": 1, "2025-04-29": 2, "2025-04-30": 1, "2025-05-01": 1, "2025-05-02": 3, "2025-05-05": 2, "2025-05-06": 1, "2025-05-07": 2, "2025-05-08": 3, "2025-05-09": 2, "2025-05-12": 3, "2025-05-13": 3, "2025-05-14": 1, "2025-05-15": 3, "2025-05-16": 3, "2025-05-19": 3, "2025-05-20": 3, "2025-05-21": 3, "2025-05-22": 2, "2025-05-23": 2, "2025-05-27": 3, "2025-05-28": 2, "2025-05-29": 2, "2025-05-30": 2, "2025-06-02": 3, "2025-06-03": 3, "2025-06-04": 3, "2025-06-05": 3, "2025-06-06": 3, "2025-06-09": 3, "2025-06-10": 3, "2025-06-11": 3, "2025-06-12": 3, "2025-06-13": 2, "2025-06-16": 3, "2025-06-17": 2, "2025-06-18": 3, "2025-06-20": 1, "2025-06-23": 4, "2025-06-24": 5, "2025-06-25": 5, "2025-06-26": 5, "2025-06-27": 6, "2025-06-30": 5}, "v2": {"2025-04-01": 1, "2025-04-02": 1, "2025-04-03": 1, "2025-04-04": 1, "2025-04-07": 1, "2025-04-08": 2, "2025-04-09": 3, "2025-04-10": 2, "2025-04-11": 3, "2025-04-14": 4, "2025-04-15": 4, "2025-04-16": 3, "2025-04-17": 3, "2025-04-21": 1, "2025-04-22": 2, "2025-04-23": 3, "2025-04-24": 4, "2025-04-25": 4, "2025-04-28": 5, "2025-04-29": 5, "2025-04-30": 5, "2025-05-01": 5, "2025-05-02": 5, "2025-05-05": 5, "2025-05-06": 5, "2025-05-07": 5, "2025-05-08": 5, "2025-05-09": 5, "2025-05-12": 5, "2025-05-13": 5, "2025-05-14": 5, "2025-05-15": 5, "2025-05-16": 5, "2025-05-19": 5, "2025-05-20": 6, "2025-05-21": 5, "2025-05-22": 4, "2025-05-23": 3, "2025-05-27": 5, "2025-05-28": 4, "2025-05-29": 3, "2025-05-30": 4, "2025-06-02": 4, "2025-06-03": 4, "2025-06-04": 6, "2025-06-05": 4, "2025-06-06": 5, "2025-06-09": 6, "2025-06-10": 5, "2025-06-11": 5, "2025-06-12": 4, "2025-06-13": 2, "2025-06-16": 3, "2025-06-17": 2, "2025-06-18": 2, "2025-06-20": 3, "2025-06-23": 4, "2025-06-24": 7, "2025-06-25": 6, "2025-06-26": 7, "2025-06-27": 7, "2025-06-30": 7}};
                    const stochasticData = {"stoch_10_4": ["2025-04-07", "2025-04-08"], "stoch_10_1": ["2025-04-03", "2025-04-04", "2025-04-08", "2025-06-20"]};

                    // Prepare data in format expected by CompareChart
                    const data = { data: chartData };

                    new CompareChart('chart_SPY', data, scorecardData, stochasticData);
                })();
                </script>
                
                <script>
                (function() {
                    const chartData = [{"date": "2025-04-01", "open": 467.3, "high": 473.63, "low": 464.42, "close": 472.7, "volume": 41156226}, {"date": "2025-04-02", "open": 466.12, "high": 479.56, "low": 465.86, "close": 476.15, "volume": 49894489}, {"date": "2025-04-03", "open": 456.44, "high": 460.07, "low": 450.14, "close": 450.66, "volume": 70456338}, {"date": "2025-04-04", "open": 438.14, "high": 440.37, "low": 422.67, "close": 422.67, "volume": 117088441}, {"date": "2025-04-07", "open": 408.66, "high": 443.14, "low": 402.39, "close": 423.69, "volume": 161556970}, {"date": "2025-04-08", "open": 438.16, "high": 443.14, "low": 409.79, "close": 416.06, "volume": 101248060}, {"date": "2025-04-09", "open": 415.57, "high": 467.83, "low": 415.43, "close": 466.0, "volume": 142876878}, {"date": "2025-04-10", "open": 453.56, "high": 455.59, "low": 432.63, "close": 446.18, "volume": 108384092}, {"date": "2025-04-11", "open": 444.65, "high": 455.79, "low": 441.33, "close": 454.4, "volume": 52483779}, {"date": "2025-04-14", "open": 464.46, "high": 465.05, "low": 452.63, "close": 457.48, "volume": 43941179}, {"date": "2025-04-15", "open": 458.54, "high": 462.38, "low": 456.15, "close": 457.99, "volume": 35404210}, {"date": "2025-04-16", "open": 449.03, "high": 452.62, "low": 437.76, "close": 444.18, "volume": 48980552}, {"date": "2025-04-17", "open": 447.17, "high": 447.75, "low": 441.36, "close": 444.1, "volume": 44837047}, {"date": "2025-04-21", "open": 438.23, "high": 439.08, "low": 427.93, "close": 433.11, "volume": 44149313}, {"date": "2025-04-22", "open": 438.82, "high": 447.58, "low": 437.62, "close": 444.48, "volume": 52304388}, {"date": "2025-04-23", "open": 458.17, "high": 463.38, "low": 452.88, "close": 454.56, "volume": 55801136}, {"date": "2025-04-24", "open": 456.48, "high": 467.66, "low": 455.83, "close": 467.35, "volume": 45956136}, {"date": "2025-04-25", "open": 466.97, "high": 473.09, "low": 465.39, "close": 472.56, "volume": 38697063}, {"date": "2025-04-28", "open": 473.03, "high": 474.81, "low": 466.03, "close": 472.41, "volume": 33550778}, {"date": "2025-04-29", "open": 470.17, "high": 476.42, "low": 469.59, "close": 475.53, "volume": 30613120}, {"date": "2025-04-30", "open": 467.13, "high": 477.2, "low": 462.43, "close": 475.47, "volume": 46810610}, {"date": "2025-05-01", "open": 483.41, "high": 487.18, "low": 480.74, "close": 481.68, "volume": 43316539}, {"date": "2025-05-02", "open": 486.54, "high": 490.91, "low": 484.83, "close": 488.83, "volume": 39218082}, {"date": "2025-05-05", "open": 484.6, "high": 489.03, "low": 484.1, "close": 485.93, "volume": 28309490}, {"date": "2025-05-06", "open": 479.56, "high": 485.05, "low": 478.19, "close": 481.41, "volume": 32786310}, {"date": "2025-05-07", "open": 482.08, "high": 485.8, "low": 476.78, "close": 483.3, "volume": 38109864}, {"date": "2025-05-08", "open": 488.53, "high": 492.7, "low": 484.17, "close": 488.29, "volume": 39577592}, {"date": "2025-05-09", "open": 490.21, "high": 491.54, "low": 486.19, "close": 487.97, "volume": 27767416}, {"date": "2025-05-12", "open": 506.99, "high": 507.89, "low": 501.48, "close": 507.85, "volume": 45090616}, {"date": "2025-05-13", "open": 509.16, "high": 517.39, "low": 508.42, "close": 515.59, "volume": 53269573}, {"date": "2025-05-14", "open": 516.77, "high": 519.23, "low": 515.75, "close": 518.68, "volume": 47014516}, {"date": "2025-05-15", "open": 516.52, "high": 521.93, "low": 515.17, "close": 519.25, "volume": 50153275}, {"date": "2025-05-16", "open": 520.66, "high": 521.7, "low": 517.1, "close": 521.51, "volume": 48394603}, {"date": "2025-05-19", "open": 514.24, "high": 522.53, "low": 514.24, "close": 522.01, "volume": 52536154}, {"date": "2025-05-20", "open": 519.47, "high": 520.93, "low": 516.66, "close": 520.27, "volume": 42517561}, {"date": "2025-05-21", "open": 516.27, "high": 523.0, "low": 511.24, "close": 513.04, "volume": 71292831}, {"date": "2025-05-22", "open": 513.66, "high": 517.71, "low": 512.3, "close": 514.0, "volume": 55607169}, {"date": "2025-05-23", "open": 506.18, "high": 511.84, "low": 505.58, "close": 509.24, "volume": 58368075}, {"date": "2025-05-27", "open": 516.15, "high": 521.71, "low": 514.59, "close": 521.22, "volume": 47226323}, {"date": "2025-05-28", "open": 522.18, "high": 523.68, "low": 518.39, "close": 518.91, "volume": 46637175}, {"date": "2025-05-29", "open": 526.33, "high": 526.48, "low": 517.32, "close": 519.93, "volume": 58724069}, {"date": "2025-05-30", "open": 519.44, "high": 520.68, "low": 511.93, "close": 519.11, "volume": 67662836}, {"date": "2025-06-02", "open": 517.24, "high": 523.45, "low": 515.97, "close": 523.21, "volume": 44762817}, {"date": "2025-06-03", "open": 523.56, "high": 528.74, "low": 522.69, "close": 527.3, "volume": 44070330}, {"date": "2025-06-04", "open": 528.01, "high": 529.84, "low": 525.97, "close": 528.77, "volume": 41359322}, {"date": "2025-06-05", "open": 530.18, "high": 533.05, "low": 522.66, "close": 524.79, "volume": 61286623}, {"date": "2025-06-06", "open": 530.0, "high": 531.8, "low": 528.21, "close": 529.92, "volume": 42467021}, {"date": "2025-06-09", "open": 530.14, "high": 532.35, "low": 529.01, "close": 530.7, "volume": 33688671}, {"date": "2025-06-10", "open": 531.17, "high": 534.9, "low": 528.89, "close": 534.21, "volume": 40664795}, {"date": "2025-06-11", "open": 535.62, "high": 536.78, "low": 530.11, "close": 532.41, "volume": 53701033}, {"date": "2025-06-12", "open": 531.09, "high": 534.64, "low": 530.84, "close": 533.66, "volume": 34104887}, {"date": "2025-06-13", "open": 527.68, "high": 531.87, "low": 525.73, "close": 526.96, "volume": 55814443}, {"date": "2025-06-16", "open": 530.5, "high": 535.37, "low": 530.45, "close": 534.29, "volume": 37622051}, {"date": "2025-06-17", "open": 531.71, "high": 533.33, "low": 527.91, "close": 529.08, "volume": 42180866}, {"date": "2025-06-18", "open": 530.1, "high": 532.55, "low": 527.4, "close": 528.99, "volume": 43983522}, {"date": "2025-06-20", "open": 532.26, "high": 533.56, "low": 524.88, "close": 526.83, "volume": 61643519}, {"date": "2025-06-23", "open": 526.81, "high": 532.17, "low": 523.65, "close": 531.65, "volume": 50666146}, {"date": "2025-06-24", "open": 536.89, "high": 540.7, "low": 536.27, "close": 539.78, "volume": 45441982}, {"date": "2025-06-25", "open": 542.06, "high": 543.31, "low": 539.38, "close": 541.16, "volume": 44804168}, {"date": "2025-06-26", "open": 543.35, "high": 546.67, "low": 541.52, "close": 546.22, "volume": 43811432}, {"date": "2025-06-27", "open": 547.26, "high": 549.99, "low": 544.54, "close": 548.09, "volume": 57577147}, {"date": "2025-06-30", "open": 551.26, "high": 552.8, "low": 549.01, "close": 551.64, "volume": 45548742}];
                    const scorecardData = {"v1": {"2025-04-01": 0, "2025-04-02": 0, "2025-04-03": 1, "2025-04-04": 0, "2025-04-07": 0, "2025-04-08": 0, "2025-04-09": 0, "2025-04-10": 0, "2025-04-11": 0, "2025-04-14": 0, "2025-04-15": 0, "2025-04-16": 0, "2025-04-17": 0, "2025-04-21": 0, "2025-04-22": 0, "2025-04-23": 0, "2025-04-24": 0, "2025-04-25": 2, "2025-04-28": 1, "2025-04-29": 2, "2025-04-30": 1, "2025-05-01": 1, "2025-05-02": 3, "2025-05-05": 2, "2025-05-06": 1, "2025-05-07": 2, "2025-05-08": 3, "2025-05-09": 2, "2025-05-12": 3, "2025-05-13": 3, "2025-05-14": 1, "2025-05-15": 3, "2025-05-16": 3, "2025-05-19": 3, "2025-05-20": 3, "2025-05-21": 3, "2025-05-22": 2, "2025-05-23": 2, "2025-05-27": 3, "2025-05-28": 2, "2025-05-29": 2, "2025-05-30": 2, "2025-06-02": 3, "2025-06-03": 3, "2025-06-04": 3, "2025-06-05": 3, "2025-06-06": 3, "2025-06-09": 3, "2025-06-10": 3, "2025-06-11": 3, "2025-06-12": 3, "2025-06-13": 2, "2025-06-16": 3, "2025-06-17": 2, "2025-06-18": 3, "2025-06-20": 1, "2025-06-23": 4, "2025-06-24": 5, "2025-06-25": 5, "2025-06-26": 5, "2025-06-27": 6, "2025-06-30": 5}, "v2": {"2025-04-01": 1, "2025-04-02": 1, "2025-04-03": 1, "2025-04-04": 1, "2025-04-07": 1, "2025-04-08": 2, "2025-04-09": 3, "2025-04-10": 2, "2025-04-11": 3, "2025-04-14": 4, "2025-04-15": 4, "2025-04-16": 3, "2025-04-17": 3, "2025-04-21": 1, "2025-04-22": 2, "2025-04-23": 3, "2025-04-24": 4, "2025-04-25": 4, "2025-04-28": 5, "2025-04-29": 5, "2025-04-30": 5, "2025-05-01": 5, "2025-05-02": 5, "2025-05-05": 5, "2025-05-06": 5, "2025-05-07": 5, "2025-05-08": 5, "2025-05-09": 5, "2025-05-12": 5, "2025-05-13": 5, "2025-05-14": 5, "2025-05-15": 5, "2025-05-16": 5, "2025-05-19": 5, "2025-05-20": 6, "2025-05-21": 5, "2025-05-22": 4, "2025-05-23": 3, "2025-05-27": 5, "2025-05-28": 4, "2025-05-29": 3, "2025-05-30": 4, "2025-06-02": 4, "2025-06-03": 4, "2025-06-04": 6, "2025-06-05": 4, "2025-06-06": 5, "2025-06-09": 6, "2025-06-10": 5, "2025-06-11": 5, "2025-06-12": 4, "2025-06-13": 2, "2025-06-16": 3, "2025-06-17": 2, "2025-06-18": 2, "2025-06-20": 3, "2025-06-23": 4, "2025-06-24": 7, "2025-06-25": 6, "2025-06-26": 7, "2025-06-27": 7, "2025-06-30": 7}};
                    const stochasticData = {"stoch_10_4": ["2025-04-07", "2025-04-08"], "stoch_10_1": ["2025-04-03", "2025-04-04", "2025-04-08", "2025-06-20"]};

                    // Prepare data in format expected by CompareChart
                    const data = { data: chartData };

                    new CompareChart('chart_QQQ', data, scorecardData, stochasticData);
                })();
                </script>
                
</body>
</html>